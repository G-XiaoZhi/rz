## 整个程序设计框架


### 模块分类
- 判断模块，策略+数据，得出结果
- 交易模块，处理买入、卖出shareCode
- 策略模块，管理策略，策略的生命周期管理，增删改查
- 帐户模块，管理，动态更新，同策略、结果数据相关联
- 权限模块，RBAC，策略条数、服务类型，参数种类，策略个数，回测最大周期，回测每次次数，实时频率，实时策略个数，实时策略参数
- 日志模块，记录交易细节、记录程序运行日志
- 结果模块，存储回测和实时的结果数据，支持结果数据的加工处理，支持展示的可扩展


### 整体流程
- 确认服务类型，权限控制等
- web或yaml方式输入配置，数据落库
- 初始化相关数据结构：config、stg、account等
- 加载数据（这里考虑内存缓存方式，感觉每次读db效率太低；对比性能测试，注意长周期的分段加载）
- 执行回测或者实时服务
  - 实时服务，时间周期是到上一个交易日，控制频率实时获取当前数据；定时触发，输入输出、买入卖出（当天买入不允许卖出）
  - 回测服务，一段有效的交易周期，但是实际需要加载的数据依赖程序的参数；以天为单位触发，循环输入输出、买入卖出（当天买入不允许卖出）
- 结果数据记录及展示

- 具体的交易流程
  - 帐户数据OK
  - 策略信息OK
  - 策略参数对应的数据OK
  - 先卖出策略，执行shareCode的输入输出，得到需卖出的shareCode，执行卖出操作，更新帐户信息
  - 再买入策略，执行shareCode的输入输出，得到需买入的shareCode，执行买入操作，更新帐户信息
  - 筛选判断支持不断的循环迭代，上一轮策略的输出Code列表，可以作为下一轮策略的输入


### 代码框架
- view 对接web服务，优先级最低
- service 业务层，分两大部分：回测、实时
- core 核心功能，主体逻辑
  - trade 交易流程逻辑
  - judge 条件判断，输入、输出
  - buy 买入；输入买入struct，执行买入；股票code to buy_struct
  - sale 卖出；输入卖出struct，执行卖出；股票code to sale_struct
  - result 结果记录
- models 定义db模型
- commons 常见参数和配置
  - log 日志配置
- jobs 定时任务处理
- stgs 策略yaml模版，支持yaml输入和web两种输入方式
- dao 对接db 数据读写

